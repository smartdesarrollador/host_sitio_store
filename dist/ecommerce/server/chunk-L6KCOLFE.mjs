import './polyfills.server.mjs';
import{a as L}from"./chunk-X6ZHPHZS.mjs";import{a as R,b as M,c as N,d as $,e as D,f as j,k as q,o as z}from"./chunk-JKJU37YY.mjs";import{Db as P,H as y,P as a,Q as h,Ua as I,Va as T,Xa as O,Y as m,aa as S,ca as b,da as E,ja as t,ka as n,la as v,o as V,oa as w,ra as u,s as _,sa as o,t as p,ta as s,ua as k,va as f,wa as C,ya as F,za as x}from"./chunk-UVT4YTT5.mjs";import"./chunk-KRLCULJA.mjs";var Y=(l,c)=>c.id;function B(l,c){if(l&1){let e=w();t(0,"tr")(1,"th",5),v(2,"img",10)(3,"br"),t(4,"a",8),u("click",function(){_(e);let i=o().$implicit,d=o(3);return p(d.reviewShow(i))}),s(5,"Review"),n()(),t(6,"td",6),s(7),n(),t(8,"td"),s(9),n(),t(10,"td",7),s(11),n(),t(12,"td",7),s(13),n()()}if(l&2){let e=o().$implicit;a(2),m("src",e.product.imagen,y),a(5),k(e.product.title),a(2),f("",e.quantity," "),a(2),C("",e.subtotal," ",e.currency,""),a(2),C("",e.total," ",e.currency,"")}}function G(l,c){if(l&1&&S(0,B,14,7,"tr",9),l&2){let e=o().$implicit;m("ngIf",e.sale_detail_show)}}function U(l,c){if(l&1){let e=w();t(0,"tr")(1,"th",5),s(2),n(),t(3,"td",6),s(4),n(),t(5,"td"),s(6),n(),t(7,"td",7),s(8),n(),t(9,"td")(10,"a",8),u("click",function(){let d=_(e).$implicit,A=o(2);return p(A.detailShow(d))}),s(11,"Detail"),n()()(),b(12,G,1,1,"tr",null,Y)}if(l&2){let e=c.$implicit;a(2),f(" #",e.n_transaccion,""),a(2),k(e.method_payment),a(2),f("",e.created_at," "),a(2),C("",e.total," ",e.currency_payment,""),a(4),E(e.sale_details)}}function W(l,c){if(l&1&&(t(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),s(4,"N\xB0 Transacci\xF3n"),n(),t(5,"th",4),s(6,"Metodo de pago"),n(),t(7,"th",4),s(8,"Fecha de registro"),n(),t(9,"th",4),s(10,"Monto total"),n(),t(11,"th",4),s(12,"View"),n()()(),t(13,"tbody"),b(14,U,14,5,null,null,Y),n()()),l&2){let e=o();a(14),E(e.sales)}}var g=l=>({"start-gris":l});function H(l,c){if(l&1){let e=w();t(0,"div",11)(1,"h3",12),s(2),n(),t(3,"p"),s(4,"Your email address will not be published. Required fields are marked *"),n(),t(5,"form",13)(6,"div",14)(7,"p"),s(8,"Your Rating :"),n(),t(9,"div",15)(10,"span",16),u("click",function(){_(e);let i=o();return p(i.selectedRating(1))}),v(11,"i",17),n(),t(12,"span",16),u("click",function(){_(e);let i=o();return p(i.selectedRating(2))}),v(13,"i",17),n(),t(14,"span",16),u("click",function(){_(e);let i=o();return p(i.selectedRating(3))}),v(15,"i",17),n(),t(16,"span",16),u("click",function(){_(e);let i=o();return p(i.selectedRating(4))}),v(17,"i",17),n(),t(18,"span",16),u("click",function(){_(e);let i=o();return p(i.selectedRating(5))}),v(19,"i",17),n()()(),t(20,"div",18)(21,"div",19)(22,"div",20)(23,"textarea",21),u("ngModelChange",function(i){_(e);let d=o();return p(d.message=i)}),n()()()(),t(24,"div",22)(25,"button",23),u("click",function(){_(e);let i=o();return p(i.saveReview())}),s(26),n(),t(27,"button",24),u("click",function(){_(e);let i=o();return p(i.backlist())}),s(28,"Salir"),n()()()()}if(l&2){let e=o();a(2),f('Review: "',e.sale_detail_review.product.title,'"'),a(8),m("ngClass",x(8,g,e.rating<1)),a(2),m("ngClass",x(10,g,e.rating<2)),a(2),m("ngClass",x(12,g,e.rating<3)),a(2),m("ngClass",x(14,g,e.rating<4)),a(2),m("ngClass",x(16,g,e.rating<5)),a(5),m("ngModel",e.message),a(3),f(" ",e.sale_detail_review.review?"Editar Review":"Registrar Review"," ")}}var ne=(()=>{let c=class c{constructor(r,i){this.profileCliente=r,this.toast=i,this.sales=[],this.rating=0,this.message="",this.profileCliente.showOrders().subscribe(d=>{console.log(d),this.sales=d.sales.data})}detailShow(r){r.sale_detail_show=!r.sale_detail_show}reviewShow(r){this.sale_detail_review=r,this.sale_detail_review.review&&(this.rating=this.sale_detail_review.review.rating,this.message=this.sale_detail_review.review.message)}selectedRating(r){this.rating=r}backlist(){this.sale_detail_review=null,this.rating=0,this.message=""}saveReview(){if(!this.message||!this.rating){this.toast.error("Validaci\xF3n","Necesitas seleccionar una califaci\xF3n y llenar una rese\xF1a");return}let r={product_id:this.sale_detail_review.product_id,sale_detail_id:this.sale_detail_review.id,message:this.message,rating:this.rating};this.sale_detail_review.review?this.profileCliente.updateReview(this.sale_detail_review.review.id,r).subscribe(i=>{this.toast.success("Exitos","La rese\xF1a se edito correctamente"),this.sale_detail_review.review=i.review}):this.profileCliente.registerReview(r).subscribe(i=>{this.toast.success("Exitos","La rese\xF1a se registro correctamente"),this.sale_detail_review.review=i.review})}};c.\u0275fac=function(i){return new(i||c)(h(L),h(z))},c.\u0275cmp=V({type:c,selectors:[["app-orders-profile-client"]],standalone:!0,features:[F],decls:3,vars:2,consts:[[1,"profile__ticket","table-responsive"],["class","table",4,"ngIf"],["class","tp-product-details-review-form",4,"ngIf"],[1,"table"],["scope","col"],["scope","row"],["data-info","title"],["data-info","status pending"],["href","#","onclick","return false;",1,"tp-logout-btn",3,"click"],[4,"ngIf"],["alt","",2,"width","25%","object-fit","contain",3,"src"],[1,"tp-product-details-review-form"],[1,"tp-product-details-review-form-title"],["action","#"],[1,"tp-product-details-review-form-rating","d-flex","align-items-center"],[1,"tp-product-details-review-form-rating-icon","d-flex","align-items-center"],[1,"start-large",3,"ngClass","click"],[1,"fa-solid","fa-star"],[1,"tp-product-details-review-input-wrapper"],[1,"tp-product-details-review-input-box"],[1,"tp-product-details-review-input"],["id","message","name","message","placeholder","Write your review here...",3,"ngModel","ngModelChange"],[1,"tp-product-details-review-btn-wrapper"],["type","button",1,"tp-product-details-review-btn",3,"click"],["type","button",1,"btn","btn-dark","mx-3",3,"click"]],template:function(i,d){i&1&&(t(0,"div",0),S(1,W,16,0,"table",1)(2,H,29,18,"div",2),n()),i&2&&(a(1),m("ngIf",!d.sale_detail_review),a(1),m("ngIf",d.sale_detail_review))},dependencies:[O,I,T,q,j,R,M,N,D,$,P],styles:[".start-large[_ngcontent-%COMP%]{font-size:xx-large}.start-gris[_ngcontent-%COMP%]{color:#9a9a9a!important}"]});let l=c;return l})();export{ne as OrdersProfileClientComponent};
